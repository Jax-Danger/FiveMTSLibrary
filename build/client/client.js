"use strict";(()=>{var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var h=p(d=>{var I=e=>new Promise(t=>setTimeout(t,e)),g=global.exports.TSLib;global.exports("getDistance",(e,t)=>{let l=e[0]-t[0],o=e[1]-t[1],r=e[2]-t[2],n=Math.sqrt(l*l+o*o+r*r);return console.log(`getDistance has returned coords1=${e}, coords2=${t}, distance=${n}`),n});global.exports("getClosestPlayer",(e,t)=>{let l=GetActivePlayers(),o=-1,r=null,n=null;t=t||2;let y=PlayerId();for(let c=0;c<l.length;c++){let s=l[c];if(s!==y){let a=GetPlayerPed(s),P=GetEntityCoords(a,!0),f=g.getDistance(e,P);f<t&&(t=f,o=s,r=a,n=P)}}return{closestId:o,closestPed:r,closestCoords:n}});global.exports("loadAnimDict",async e=>{for(RequestAnimDict(e);!HasAnimDictLoaded(e);)await I(100)});var i=!1;global.exports("Handcuff",async()=>{let e=GetEntityCoords(PlayerPedId(),!0),l=global.exports["MP-Police"].getClosestPlayer(e,2).closestId;if(l!==-1){let o=GetPlayerServerId(l);emitNet("Handcuff",o)}else console.log("No player found within the specified distance.")});onNet("Handcuff",async()=>{let e=GetPlayerPed(-1);i||(await g.loadAnimDict("mp_arresting"),TaskPlayAnim(e,"mp_arresting","idle",8,-8,-1,49,0,!1,!1,!1),SetEnableHandcuffs(e,!0),SetCurrentPedWeapon(e,GetHashKey("WEAPON_UNARMED"),!0),i=!0)});global.exports("RemoveHandcuffs",async()=>{let e=GetEntityCoords(PlayerPedId(),!0),l=global.exports["MP-Police"].getClosestPlayer(e,2).closestId;if(l!==-1){let o=GetPlayerServerId(l);emitNet("RemoveHandcuff",o)}else console.log("No player found within the specified distance.")});onNet("RemoveHandcuff",async()=>{let e=GetPlayerPed(-1);i&&(ClearPedSecondaryTask(e),SetEnableHandcuffs(e,!1),SetCurrentPedWeapon(e,GetHashKey("WEAPON_UNARMED"),!0),i=!1)});var m,b=-1,u=!1;global.exports("DragPlayer",()=>{console.log("dragging player");let e=GetEntityCoords(PlayerPedId(),!0),l=global.exports["MP-Police"].getClosestPlayer(e,2).closestId;if(l!==-1){let o=GetPlayerServerId(l);m=o,emitNet("Drag",o,GetPlayerServerId(PlayerId()))}else console.log("There is no player nearby!")});onNet("Drag",(e,t)=>{let l=GetPlayerServerId(PlayerId()),o=GetPlayerPed(-1);e===l&&(b=t,u=!u,u?SetEnableHandcuffs(o,!0):SetEnableHandcuffs(o,!1))});d("ForceIntoVehicle",()=>{let e=PlayerPedId(),t=GetEntityCoords(e,!0),o=d["MP-Police"].getClosestPlayer(t,2).closestId;if(console.log(o,GetPlayerServerId(o)),o<=0)return emit("MP-Elements:SendNotification",2,"No player found",500);emitNet("ForceIntoVehicle",GetPlayerServerId(o),o)});onNet("ForceIntoVehicle",(e,t)=>{console.log(1);let l=GetPlayerPed(t),o=PlayerPedId(),r=GetEntityCoords(o,!0),[n,y,c]=[r[0],r[1],r[2]],s=GetClosestVehicle(n,y,c,5,0,127);if(console.log(s),s){console.log(2);let a=GetEntityCoords(s,!0);GetDistanceBetweenCoords(r[0],r[1],r[2],a[0],a[1],a[2],!0)<5&&(console.log(l),console.log(`Warping player ${e} into seat: 2`),TaskWarpPedIntoVehicle(l,s,2))}else console.log("No vehicle available or no nearest player found.")});d("ForceOutOfVehicle",()=>{let e=PlayerPedId(),t=GetEntityCoords(e,!0),o=d["MP-Police"].getClosestPlayer(t,2).closestId;if(console.log(o,GetPlayerServerId(o)),o<=0)return emit("MP-Elements:SendNotification",2,"No player found",500);emitNet("ForceOutOfVehicle",GetPlayerServerId(o),o)});onNet("ForceOutOfVehicle",e=>{console.log("Attempting to remove player from vehicle");let t=GetPlayerPed(e),l=GetVehiclePedIsIn(t,!0);l!==0?(console.log("Player is in a vehicle, attempting to remove..."),setImmediate(()=>{TaskLeaveAnyVehicle(t,l,16)})):console.log("Player is not in a vehicle.")})});h();})();
