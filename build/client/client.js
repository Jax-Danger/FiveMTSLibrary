"use strict";(()=>{var g=e=>new Promise(t=>setTimeout(t,e)),f=global.exports.TSLib;global.exports("getDistance",(e,t)=>{let r=e[0]-t[0],a=e[1]-t[1],l=e[2]-t[2],s=Math.sqrt(r*r+a*a+l*l);return console.log(`getDistance has returned coords1=${e}, coords2=${t}, distance=${s}`),s});global.exports("getClosestPlayer",(e,t)=>{let r=GetActivePlayers(),a=-1,l=null,s=null;t=t||2;let u=PlayerId();for(let o=0;o<r.length;o++){let d=r[o];if(d!==u){let y=GetPlayerPed(d),P=GetEntityCoords(y,!0),i=f.getDistance(e,P);i<t&&(t=i,a=d,l=y,s=P)}}return{closestId:a,closestPed:l,closestCoords:s}});global.exports("loadAnimDict",async e=>{for(RequestAnimDict(e);!HasAnimDictLoaded(e);)await g(100)});var n=!1;global.exports("Handcuff",async()=>{let e=GetEntityCoords(PlayerPedId(),!0),r=global.exports["MP-Police"].getClosestPlayer(e,2).closestId;if(r!==-1){let a=GetPlayerServerId(r);emitNet("Handcuff",a)}else console.log("No player found within the specified distance.")});onNet("Handcuff",async()=>{let e=GetPlayerPed(-1);n||(await f.loadAnimDict("mp_arresting"),TaskPlayAnim(e,"mp_arresting","idle",8,-8,-1,49,0,!1,!1,!1),SetEnableHandcuffs(e,!0),SetCurrentPedWeapon(e,GetHashKey("WEAPON_UNARMED"),!0),n=!0)});global.exports("RemoveHandcuffs",async()=>{let e=GetEntityCoords(PlayerPedId(),!0),r=global.exports["MP-Police"].getClosestPlayer(e,2).closestId;if(r!==-1){let a=GetPlayerServerId(r);emitNet("RemoveHandcuff",a)}else console.log("No player found within the specified distance.")});onNet("RemoveHandcuff",async()=>{let e=GetPlayerPed(-1);n&&(ClearPedSecondaryTask(e),SetEnableHandcuffs(e,!1),SetCurrentPedWeapon(e,GetHashKey("WEAPON_UNARMED"),!0),n=!1)});var b,p=-1,c=!1;global.exports("DragPlayer",()=>{console.log("dragging player");let e=GetEntityCoords(PlayerPedId(),!0),r=global.exports["MP-Police"].getClosestPlayer(e,2).closestId;if(r!==-1){let a=GetPlayerServerId(r);b=a,emitNet("Drag",a,GetPlayerServerId(PlayerId()))}else console.log("There is no player nearby!")});onNet("Drag",(e,t)=>{let r=GetPlayerServerId(PlayerId()),a=GetPlayerPed(-1);e===r&&(p=t,c=!c,c?SetEnableHandcuffs(a,!0):SetEnableHandcuffs(a,!1))});})();
