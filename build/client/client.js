"use strict";(()=>{var g=e=>new Promise(t=>setTimeout(t,e)),f=global.exports.TSLib;global.exports("getDistance",(e,t)=>{let r=e[0]-t[0],l=e[1]-t[1],s=e[2]-t[2],a=Math.sqrt(r*r+l*l+s*s);return console.log(`getDistance: coords1=${e}, coords2=${t}, distance=${a}`),a});function p(e,t){let r=GetActivePlayers(),l=-1,s=null,a=null;t=t||2;let u=PlayerId();for(let o=0;o<r.length;o++){let d=r[o];if(d!==u){let y=GetPlayerPed(d),i=GetEntityCoords(y,!0),P=f.getDistance(e,i);P<t&&(t=P,l=d,s=y,a=i)}}return{closestId:l,closestPed:s,closestCoords:a}}global.exports("getClosestPlayer",p);global.exports("loadAnimDict",async e=>{for(RequestAnimDict(e);!HasAnimDictLoaded(e);)await g(100)});var n=!1;global.exports("Handcuff",async()=>{let e=GetEntityCoords(PlayerPedId(),!0),r=global.exports["MP-Police"].getClosestPlayer(e,2).closestId;if(r!==-1){let l=GetPlayerServerId(r);emitNet("Handcuff",l)}else console.log("No player found within the specified distance.")});onNet("Handcuff",async()=>{let e=GetPlayerPed(-1);n||(await f.loadAnimDict("mp_arresting"),TaskPlayAnim(e,"mp_arresting","idle",8,-8,-1,49,0,!1,!1,!1),SetEnableHandcuffs(e,!0),SetCurrentPedWeapon(e,GetHashKey("WEAPON_UNARMED"),!0),n=!0)});global.exports("RemoveHandcuffs",async()=>{let e=GetEntityCoords(PlayerPedId(),!0),r=global.exports["MP-Police"].getClosestPlayer(e,2).closestId;if(r!==-1){let l=GetPlayerServerId(r);emitNet("RemoveHandcuff",l)}else console.log("No player found within the specified distance.")});onNet("RemoveHandcuff",async()=>{let e=GetPlayerPed(-1);n&&(ClearPedSecondaryTask(e),SetEnableHandcuffs(e,!1),SetCurrentPedWeapon(e,GetHashKey("WEAPON_UNARMED"),!0),n=!1)});var b,I=-1,c=!1;global.exports("DragPlayer",()=>{console.log("dragging player");let e=GetEntityCoords(PlayerPedId(),!0),r=global.exports["MP-Police"].getClosestPlayer(e,2).closestId;if(r!==-1){let l=GetPlayerServerId(r);b=l,emitNet("Drag",l,GetPlayerServerId(PlayerId()))}else console.log("No player found within the specified distance.")});onNet("Drag",(e,t)=>{let r=GetPlayerServerId(PlayerId()),l=GetPlayerPed(-1);e===r&&(I=t,c=!c,c?SetEnableHandcuffs(l,!0):SetEnableHandcuffs(l,!1))});})();
